-- DB作成
CREATE DATABASE golang_sample_db;

-- 作成したDBに接続
\c golang_sample_db;

-- テーブル作成
DROP TABLE IF EXISTS books;
CREATE TABLE books (
    id integer NOT NULL PRIMARY KEY,
    name varchar(100) NOT NULL,
    publish_date date NOT NULL,
    created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- ID用シーケンス作成
DROP SEQUENCE IF EXISTS book_id_seq;
CREATE SEQUENCE book_id_seq START 1;

-- サンブルデータの登録
INSERT INTO books (id, name, publish_date) VALUES (nextval('book_id_seq'), 'Book 1', '2023-01-01'), (nextval('book_id_seq'), 'Book 2', '2023-01-02'), (nextval('book_id_seq'), 'Book 3', '2023-01-03'), (nextval('book_id_seq'), 'Book 4', '2023-01-04'), (nextval('book_id_seq'), 'Book 5', '2023-01-05'), (nextval('book_id_seq'), 'Book 6', '2023-01-06'), (nextval('book_id_seq'), 'Book 7', '2023-01-07'), (nextval('book_id_seq'), 'Book 8', '2023-01-08'), (nextval('book_id_seq'), 'Book 9', '2023-01-09'), (nextval('book_id_seq'), 'Book 10', '2023-01-10'), (nextval('book_id_seq'), 'Book 11', '2023-01-11'), (nextval('book_id_seq'), 'Book 12', '2023-01-12'), (nextval('book_id_seq'), 'Book 13', '2023-01-13'), (nextval('book_id_seq'), 'Book 14', '2023-01-14'), (nextval('book_id_seq'), 'Book 15', '2023-01-15'), (nextval('book_id_seq'), 'Book 16', '2023-01-16'), (nextval('book_id_seq'), 'Book 17', '2023-01-17'), (nextval('book_id_seq'), 'Book 18', '2023-01-18'), (nextval('book_id_seq'), 'Book 19', '2023-01-19'), (nextval('book_id_seq'), 'Book 20', '2023-01-20'), (nextval('book_id_seq'), 'Book 21', '2023-01-21'), (nextval('book_id_seq'), 'Book 22', '2023-01-22'), (nextval('book_id_seq'), 'Book 23', '2023-01-23'), (nextval('book_id_seq'), 'Book 24', '2023-01-24'), (nextval('book_id_seq'), 'Book 25', '2023-01-25'), (nextval('book_id_seq'), 'Book 26', '2023-01-26'), (nextval('book_id_seq'), 'Book 27', '2023-01-27'), (nextval('book_id_seq'), 'Book 28', '2023-01-28'), (nextval('book_id_seq'), 'Book 29', '2023-01-29'), (nextval('book_id_seq'), 'Book 30', '2023-01-30'), (nextval('book_id_seq'), 'Book 31', '2023-01-31'), (nextval('book_id_seq'), 'Book 32', '2023-02-01'), (nextval('book_id_seq'), 'Book 33', '2023-02-02'), (nextval('book_id_seq'), 'Book 34', '2023-02-03'), (nextval('book_id_seq'), 'Book 35', '2023-02-04'), (nextval('book_id_seq'), 'Book 36', '2023-02-05'), (nextval('book_id_seq'), 'Book 37', '2023-02-06'), (nextval('book_id_seq'), 'Book 38', '2023-02-07'), (nextval('book_id_seq'), 'Book 39', '2023-02-08'), (nextval('book_id_seq'), 'Book 40', '2023-02-09'), (nextval('book_id_seq'), 'Book 41', '2023-02-10'), (nextval('book_id_seq'), 'Book 42', '2023-02-11'), (nextval('book_id_seq'), 'Book 43', '2023-02-12'), (nextval('book_id_seq'), 'Book 44', '2023-02-13'), (nextval('book_id_seq'), 'Book 45', '2023-02-14'), (nextval('book_id_seq'), 'Book 46', '2023-02-15'), (nextval('book_id_seq'), 'Book 47', '2023-02-16'), (nextval('book_id_seq'), 'Book 48', '2023-02-17'), (nextval('book_id_seq'), 'Book 49', '2023-02-18'), (nextval('book_id_seq'), 'Book 50', '2023-02-19'), (nextval('book_id_seq'), 'Book 51', '2023-02-20'), (nextval('book_id_seq'), 'Book 52', '2023-02-21'), (nextval('book_id_seq'), 'Book 53', '2023-02-22'), (nextval('book_id_seq'), 'Book 54', '2023-02-23'), (nextval('book_id_seq'), 'Book 55', '2023-02-24'), (nextval('book_id_seq'), 'Book 56', '2023-02-25'), (nextval('book_id_seq'), 'Book 57', '2023-02-26'), (nextval('book_id_seq'), 'Book 58', '2023-02-27'), (nextval('book_id_seq'), 'Book 59', '2023-02-28'), (nextval('book_id_seq'), 'Book 60', '2023-03-01'), (nextval('book_id_seq'), 'Book 61', '2023-03-02'), (nextval('book_id_seq'), 'Book 62', '2023-03-03'), (nextval('book_id_seq'), 'Book 63', '2023-03-04'), (nextval('book_id_seq'), 'Book 64', '2023-03-05'), (nextval('book_id_seq'), 'Book 65', '2023-03-06'), (nextval('book_id_seq'), 'Book 66', '2023-03-07'), (nextval('book_id_seq'), 'Book 67', '2023-03-08'), (nextval('book_id_seq'), 'Book 68', '2023-03-09'), (nextval('book_id_seq'), 'Book 69', '2023-03-10'), (nextval('book_id_seq'), 'Book 70', '2023-03-11'), (nextval('book_id_seq'), 'Book 71', '2023-03-12'), (nextval('book_id_seq'), 'Book 72', '2023-03-13'), (nextval('book_id_seq'), 'Book 73', '2023-03-14'), (nextval('book_id_seq'), 'Book 74', '2023-03-15'), (nextval('book_id_seq'), 'Book 75', '2023-03-16'), (nextval('book_id_seq'), 'Book 76', '2023-03-17'), (nextval('book_id_seq'), 'Book 77', '2023-03-18'), (nextval('book_id_seq'), 'Book 78', '2023-03-19'), (nextval('book_id_seq'), 'Book 79', '2023-03-20'), (nextval('book_id_seq'), 'Book 80', '2023-03-21'), (nextval('book_id_seq'), 'Book 81', '2023-03-22'), (nextval('book_id_seq'), 'Book 82', '2023-03-23'), (nextval('book_id_seq'), 'Book 83', '2023-03-24'), (nextval('book_id_seq'), 'Book 84', '2023-03-25'), (nextval('book_id_seq'), 'Book 85', '2023-03-26'), (nextval('book_id_seq'), 'Book 86', '2023-03-27'), (nextval('book_id_seq'), 'Book 87', '2023-03-28'), (nextval('book_id_seq'), 'Book 88', '2023-03-29'), (nextval('book_id_seq'), 'Book 89', '2023-03-30'), (nextval('book_id_seq'), 'Book 90', '2023-03-31'), (nextval('book_id_seq'), 'Book 91', '2023-04-01'), (nextval('book_id_seq'), 'Book 92', '2023-04-02'), (nextval('book_id_seq'), 'Book 93', '2023-04-03'), (nextval('book_id_seq'), 'Book 94', '2023-04-04'), (nextval('book_id_seq'), 'Book 95', '2023-04-05'), (nextval('book_id_seq'), 'Book 96', '2023-04-06'), (nextval('book_id_seq'), 'Book 97', '2023-04-07'), (nextval('book_id_seq'), 'Book 98', '2023-04-08'), (nextval('book_id_seq'), 'Book 99', '2023-04-09'), (nextval('book_id_seq'), 'Book 100', '2023-04-10');

DROP TABLE IF EXISTS authors;
CREATE TABLE authors (
    id integer NOT NULL PRIMARY KEY,
    book_id integer NOT NULL UNIQUE,
    name varchar(100) NOT NULL,
    created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_book FOREIGN KEY (book_id) REFERENCES books (id) ON DELETE CASCADE
);


DROP SEQUENCE IF EXISTS author_book_id_seq;
CREATE SEQUENCE author_book_id_seq START 1;

INSERT INTO authors (id, book_id, name) VALUES (nextval('author_book_id_seq'), 1, 'Author 1'), (nextval('author_book_id_seq'), 2, 'Author 2'), (nextval('author_book_id_seq'), 3, 'Author 3'), (nextval('author_book_id_seq'), 4, 'Author 4'), (nextval('author_book_id_seq'), 5, 'Author 5'), (nextval('author_book_id_seq'), 6, 'Author 6'), (nextval('author_book_id_seq'), 7, 'Author 7'), (nextval('author_book_id_seq'), 8, 'Author 8'), (nextval('author_book_id_seq'), 9, 'Author 9'), (nextval('author_book_id_seq'), 10, 'Author 10'), (nextval('author_book_id_seq'), 11, 'Author 11'), (nextval('author_book_id_seq'), 12, 'Author 12'), (nextval('author_book_id_seq'), 13, 'Author 13'), (nextval('author_book_id_seq'), 14, 'Author 14'), (nextval('author_book_id_seq'), 15, 'Author 15'), (nextval('author_book_id_seq'), 16, 'Author 16'), (nextval('author_book_id_seq'), 17, 'Author 17'), (nextval('author_book_id_seq'), 18, 'Author 18'), (nextval('author_book_id_seq'), 19, 'Author 19'), (nextval('author_book_id_seq'), 20, 'Author 20'), (nextval('author_book_id_seq'), 21, 'Author 21'), (nextval('author_book_id_seq'), 22, 'Author 22'), (nextval('author_book_id_seq'), 23, 'Author 23'), (nextval('author_book_id_seq'), 24, 'Author 24'), (nextval('author_book_id_seq'), 25, 'Author 25'), (nextval('author_book_id_seq'), 26, 'Author 26'), (nextval('author_book_id_seq'), 27, 'Author 27'), (nextval('author_book_id_seq'), 28, 'Author 28'), (nextval('author_book_id_seq'), 29, 'Author 29'), (nextval('author_book_id_seq'), 30, 'Author 30'), (nextval('author_book_id_seq'), 31, 'Author 31'), (nextval('author_book_id_seq'), 32, 'Author 32'), (nextval('author_book_id_seq'), 33, 'Author 33'), (nextval('author_book_id_seq'), 34, 'Author 34'), (nextval('author_book_id_seq'), 35, 'Author 35'), (nextval('author_book_id_seq'), 36, 'Author 36'), (nextval('author_book_id_seq'), 37, 'Author 37'), (nextval('author_book_id_seq'), 38, 'Author 38'), (nextval('author_book_id_seq'), 39, 'Author 39'), (nextval('author_book_id_seq'), 40, 'Author 40'), (nextval('author_book_id_seq'), 41, 'Author 41'), (nextval('author_book_id_seq'), 42, 'Author 42'), (nextval('author_book_id_seq'), 43, 'Author 43'), (nextval('author_book_id_seq'), 44, 'Author 44'), (nextval('author_book_id_seq'), 45, 'Author 45'), (nextval('author_book_id_seq'), 46, 'Author 46'), (nextval('author_book_id_seq'), 47, 'Author 47'), (nextval('author_book_id_seq'), 48, 'Author 48'), (nextval('author_book_id_seq'), 49, 'Author 49'), (nextval('author_book_id_seq'), 50, 'Author 50'), (nextval('author_book_id_seq'), 51, 'Author 51'), (nextval('author_book_id_seq'), 52, 'Author 52'), (nextval('author_book_id_seq'), 53, 'Author 53'), (nextval('author_book_id_seq'), 54, 'Author 54'), (nextval('author_book_id_seq'), 55, 'Author 55'), (nextval('author_book_id_seq'), 56, 'Author 56'), (nextval('author_book_id_seq'), 57, 'Author 57'), (nextval('author_book_id_seq'), 58, 'Author 58'), (nextval('author_book_id_seq'), 59, 'Author 59'), (nextval('author_book_id_seq'), 60, 'Author 60'), (nextval('author_book_id_seq'), 61, 'Author 61'), (nextval('author_book_id_seq'), 62, 'Author 62'), (nextval('author_book_id_seq'), 63, 'Author 63'), (nextval('author_book_id_seq'), 64, 'Author 64'), (nextval('author_book_id_seq'), 65, 'Author 65'), (nextval('author_book_id_seq'), 66, 'Author 66'), (nextval('author_book_id_seq'), 67, 'Author 67'), (nextval('author_book_id_seq'), 68, 'Author 68'), (nextval('author_book_id_seq'), 69, 'Author 69'), (nextval('author_book_id_seq'), 70, 'Author 70'), (nextval('author_book_id_seq'), 71, 'Author 71'), (nextval('author_book_id_seq'), 72, 'Author 72'), (nextval('author_book_id_seq'), 73, 'Author 73'), (nextval('author_book_id_seq'), 74, 'Author 74'), (nextval('author_book_id_seq'), 75, 'Author 75'), (nextval('author_book_id_seq'), 76, 'Author 76'), (nextval('author_book_id_seq'), 77, 'Author 77'), (nextval('author_book_id_seq'), 78, 'Author 78'), (nextval('author_book_id_seq'), 79, 'Author 79'), (nextval('author_book_id_seq'), 80, 'Author 80'), (nextval('author_book_id_seq'), 81, 'Author 81'), (nextval('author_book_id_seq'), 82, 'Author 82'), (nextval('author_book_id_seq'), 83, 'Author 83'), (nextval('author_book_id_seq'), 84, 'Author 84'), (nextval('author_book_id_seq'), 85, 'Author 85'), (nextval('author_book_id_seq'), 86, 'Author 86'), (nextval('author_book_id_seq'), 87, 'Author 87'), (nextval('author_book_id_seq'), 88, 'Author 88'), (nextval('author_book_id_seq'), 89, 'Author 89'), (nextval('author_book_id_seq'), 90, 'Author 90'), (nextval('author_book_id_seq'), 91, 'Author 91'), (nextval('author_book_id_seq'), 92, 'Author 92'), (nextval('author_book_id_seq'), 93, 'Author 93'), (nextval('author_book_id_seq'), 94, 'Author 94'), (nextval('author_book_id_seq'), 95, 'Author 95'), (nextval('author_book_id_seq'), 96, 'Author 96'), (nextval('author_book_id_seq'), 97, 'Author 97'), (nextval('author_book_id_seq'), 98, 'Author 98'), (nextval('author_book_id_seq'), 99, 'Author 99'), (nextval('author_book_id_seq'), 100, 'Author 100');
